{% extends "base.html" %}
{% block content %}
<div class="page-head">
  <h1 class="h1">Parking spots</h1>
  <div class="sub">Default code = Flat no. Edit a spot to assign to flat, vehicle, driver name.</div>
</div>

<div class="card">
  <div class="toolbar">
    <div class="actions">
      <form method="post" action="{% url 'parking:spot_seed_all' %}" style="display:inline-block;margin-right:8px;">
        {% csrf_token %}
        <button class="btn" type="submit">Create all (from flats)</button>
      </form>
      <a class="btn ghost" href="{% url 'parking:spot_create' %}">Add spot</a>
      <a class="btn ghost" href="{% url 'parking:vehicle_list' %}">Vehicles</a>
    </div>
  </div>

  <table class="table">
    <thead><tr>
      <th>Code</th><th>Flat</th><th>Level</th><th>Reserved</th><th>Notes</th><th style="width:140px;"></th>
    </tr></thead>
    <tbody>
      {% for s in object_list %}
      <tr>
        <td><strong>{{ s.code }}</strong></td>
        <td>{{ s.flat|default:"â€”" }}</td>
        <td>{{ s.level }}</td>
        <td>{% if s.is_reserved %}<span class="badge info">Yes</span>{% else %}<span class="badge muted">No</span>{% endif %}</td>
        <td>{{ s.notes }}</td>
        <td>
          <a class="btn ghost" href="{% url 'parking:spot_detail' s.pk %}">View</a>
          <a class="btn ghost" href="{% url 'parking:spot_edit' s.pk %}">Edit</a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="6" class="muted">No spots yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
